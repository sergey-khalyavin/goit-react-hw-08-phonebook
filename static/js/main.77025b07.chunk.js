(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[4],{116:function(t,e,n){},117:function(t,e,n){"use strict";n.r(e);var r,c=n(0),a=n(19),o=n.n(a),i=n(14),s=n(69),u=n(143),b=n(51),l=n(52),j=n(54),d=n(53),O=n(22),h=n(9),f=n(137),g=n(139),p=n(140),x=n(141),m=n(17),v="/",y="/login",C="/register",A="/contacts",S=n(66),k=n.n(S),R=n(2),E={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#fff"},activeLink:{color:"#7fff61",fontSize:"16px"},title:{color:"#f8d017",fontSize:"20px",textTransform:"uppercase",padding:"0 4px",marginRight:"10px",boxShadow:"0 0 0 10px #f8d017",borderRadius:"5px"},box:{display:"flex",alignItems:"center"}},_=Object(i.b)((function(t){return{isAuthenticated:m.b.isAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(R.jsxs)("div",{style:E.box,children:[Object(R.jsx)(x.a,{in:!0,appear:!0,timeout:500,classNames:k.a,unmountOnExit:!0,children:Object(R.jsx)("h2",{style:E.title,children:"Phonebook"})}),Object(R.jsxs)("nav",{children:[Object(R.jsx)(O.b,{to:v,exact:!0,style:E.link,activeStyle:E.activeLink,children:"Home"}),e&&Object(R.jsx)(O.b,{to:A,exact:!0,style:E.link,activeStyle:E.activeLink,children:"Contacts"})]})]})})),U=n(142),q={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}},w=Object(i.b)((function(t){return{name:m.b.getUserName(t),avatar:"https://cdn.iconscout.com/icon/free/png-256/avatar-380-456324.png"}}),{onLogout:m.a.logOut})((function(t){var e=t.avatar,n=t.name,r=t.onLogout;return Object(R.jsxs)("div",{style:q.container,children:[Object(R.jsx)("img",{src:e,alt:"",width:"32",style:q.avatar}),Object(R.jsxs)("span",{style:q.name,children:["Welcome, ",n]}),Object(R.jsx)(U.a,{variant:"contained",color:"secondary",disableElevation:!0,onClick:r,children:"Logout"})]})})),L=n(13),z=n(138),I=Object(f.a)((function(t){return{root:{"& > *":{margin:t.spacing(1)}}}})),N=Object(L.a)((function(t){return{root:{color:t.palette.getContrastText(z.a.A200),backgroundColor:z.a.A200,"&:hover":{backgroundColor:z.a.A700}}}}))(U.a),B=function(){var t=I();return Object(R.jsxs)("div",{className:t.root,children:[Object(R.jsx)(N,{variant:"contained",color:"primary",children:Object(R.jsx)(O.b,{to:"/register",exact:!0,children:"Register"})}),Object(R.jsx)(N,{variant:"contained",color:"primary",children:Object(R.jsx)(O.b,{to:"/login",exact:!0,children:"Login"})})]})},P=Object(f.a)((function(t){return{root:{display:"flex",justifyContent:"space-between",flexGrow:1,width:"80vw",marginLeft:"auto",marginRight:"auto"}}})),W=Object(i.b)((function(t){return{isAuthenticated:m.b.isAuthenticated(t)}}))((function(t){var e=t.isAuthenticated,n=P();return Object(R.jsx)(g.a,{position:"static",style:{background:"#009688"},children:Object(R.jsxs)(p.a,{className:n.root,children:[Object(R.jsx)(_,{}),e?Object(R.jsx)(w,{}):Object(R.jsx)(B,{})]})})})),F={container:{width:"90vw",marginLeft:"auto",marginRight:"auto",padding:"0 24px"}},G=function(t){var e=t.children;return Object(R.jsxs)("div",{style:F.container,children:[Object(R.jsx)(W,{}),e]})},M=n(26),D=n(44),J=Object(i.b)((function(t){return{isAuthenticated:m.b.isAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=Object(D.a)(t,["component","isAuthenticated"]);return Object(R.jsx)(h.b,Object(M.a)(Object(M.a)({},r),{},{render:function(t){return n?Object(R.jsx)(e,Object(M.a)({},t)):Object(R.jsx)(h.a,{to:"/"})}}))})),T=Object(i.b)((function(t){return{isAuthenticated:m.b.isAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.restricted,c=Object(D.a)(t,["component","isAuthenticated","restricted"]);return Object(R.jsx)(h.b,Object(M.a)(Object(M.a)({},c),{},{render:function(t){return n&&r?Object(R.jsx)(h.a,{to:"/tasks"}):Object(R.jsx)(e,Object(M.a)({},t))}}))})),V=Object(c.lazy)((function(){return n.e(2).then(n.bind(null,181))})),H=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,185))})),K=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,182))})),Q=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,183))})),X=function(t){Object(j.a)(n,t);var e=Object(d.a)(n);function n(){return Object(b.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(R.jsx)(O.a,{children:Object(R.jsx)(G,{children:Object(R.jsx)(c.Suspense,{fallback:Object(R.jsx)("h1",{children:"Loading..."}),children:Object(R.jsxs)(h.d,{children:[Object(R.jsx)(T,{path:v,exact:!0,component:V,register:!1}),Object(R.jsx)(J,{path:A,component:H,exact:!0}),Object(R.jsx)(T,{path:y,exact:!0,component:K,register:!0}),Object(R.jsx)(T,{path:C,exact:!0,component:Q,register:!0}),Object(R.jsx)(h.a,{to:v})]})})})})}}]),n}(c.Component),Z={onGetCurrentUser:m.a.getCurrentUser},Y=Object(i.b)(null,Z)(X),$=n(3),tt=n(25),et=n(74),nt=n.n(et),rt=n(12),ct=n(76),at=n(11),ot=n(34),it=n(50),st=n(75);n(114),n(115);it.defaultModules.set(st,{});var ut,bt,lt,jt=Object($.c)([],(r={},Object(rt.a)(r,ot.a.fetchContactsSuccess,(function(t,e){return e.payload})),Object(rt.a)(r,ot.a.addContactSuccess,(function(t,e){var n;return t.map((function(t){return t.name.toLowerCase()})).includes(e.payload.name.toLowerCase().trim())?(n=e.payload.name,Object(it.error)({text:"".concat(n," is already in contacts!")}),t):[].concat(Object(ct.a)(t),[e.payload])})),Object(rt.a)(r,ot.a.removeContactSuccess,(function(t,e){return t.filter((function(t){return t.id!==e.payload}))})),r)),dt=Object($.c)("",Object(rt.a)({},ot.a.changeFilter,(function(t,e){return e.payload}))),Ot=Object(at.c)({items:jt,filter:dt}),ht=n(5),ft={name:null,email:null},gt=Object($.c)(ft,(ut={},Object(rt.a)(ut,ht.a.registerSuccess,(function(t,e){return e.payload.user})),Object(rt.a)(ut,ht.a.loginSuccess,(function(t,e){return e.payload.user})),Object(rt.a)(ut,ht.a.getCurrentUserSuccess,(function(t,e){return e.payload})),Object(rt.a)(ut,ht.a.logoutSuccess,(function(){return ft})),ut)),pt=Object($.c)(null,(bt={},Object(rt.a)(bt,ht.a.registerSuccess,(function(t,e){return e.payload.token})),Object(rt.a)(bt,ht.a.loginSuccess,(function(t,e){return e.payload.token})),Object(rt.a)(bt,ht.a.logoutSuccess,(function(){return null})),bt)),xt=Object($.c)(null,(lt={},Object(rt.a)(lt,ht.a.registerError,(function(t,e){return e.payload})),Object(rt.a)(lt,ht.a.loginError,(function(t,e){return e.payload})),Object(rt.a)(lt,ht.a.logoutError,(function(t,e){return e.payload})),Object(rt.a)(lt,ht.a.getCurrentUserError,(function(t,e){return e.payload})),lt)),mt=Object(at.c)({user:gt,token:pt,error:xt}),vt={key:"auth",storage:nt.a,whitelist:["token"]},yt=Object($.a)({reducer:{contacts:Ot,auth:Object(tt.g)(vt,mt)},middleware:Object($.d)({serializableCheck:{ignoredActions:[tt.a,tt.f,tt.b,tt.c,tt.d,tt.e]}})}),Ct=Object(tt.h)(yt);n(116);o.a.render(Object(R.jsx)(i.a,{store:yt,children:Object(R.jsx)(s.a,{loading:null,persistor:Ct,children:Object(R.jsx)(u.a,{children:Object(R.jsx)(Y,{})})})}),document.getElementById("root"))},17:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u}));var r=n(27),c=n.n(r),a=n(5);c.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var o=function(t){c.a.defaults.headers.common.Authorization="Bearer ".concat(t)},i=function(){c.a.defaults.headers.common.Authorization=""},s={register:function(t){return function(e){e(a.a.registerRequest()),c.a.post("/users/signup",t).then((function(t){o(t.data.token),e(a.a.registerSuccess(t.data))})).catch((function(t){var n=t.message;return e(a.a.registerError(n))}))}},logOut:function(){return function(t){t(a.a.logoutRequest()),c.a.post("/users/logout").then((function(){i(),t(a.a.logoutSuccess())})).catch((function(e){var n=e.message;return t(a.a.logoutError(n))}))}},logIn:function(t){return function(e){e(a.a.loginRequest()),c.a.post("/users/login",t).then((function(t){o(t.data.token),e(a.a.loginSuccess(t.data))})).catch((function(t){var n=t.message;return e(a.a.loginError(n))}))}},getCurrentUser:function(){return function(t,e){var n=e().auth.token;n&&(o(n),t(a.a.getCurrentUserRequest()),c.a.get("/users/current").then((function(e){var n=e.data;return t(a.a.getCurrentUserSuccess(n))})).catch((function(t){var e=t.message;return a.a.getCurrentUserError(e)})))}}},u={isAuthenticated:function(t){return t.auth.token},getUserName:function(t){return t.auth.user.name}}},34:function(t,e,n){"use strict";var r=n(3),c=Object(r.b)("contacts/addRequest"),a=Object(r.b)("contacts/addSuccess"),o=Object(r.b)("contacts/addError"),i=Object(r.b)("contacts/fetchRequest"),s=Object(r.b)("contacts/fetchSuccess"),u=Object(r.b)("contacts/fetchError"),b=Object(r.b)("contacts/removeRequest"),l=Object(r.b)("contacts/removeSuccess"),j=Object(r.b)("contacts/removeError"),d=Object(r.b)("contacts/changeFilter");e.a={addContactRequest:c,addContactSuccess:a,addContactError:o,fetchContactsRequest:i,fetchContactsSuccess:s,fetchContactsError:u,removeContactRequest:b,removeContactSuccess:l,removeContactError:j,changeFilter:d}},5:function(t,e,n){"use strict";var r=n(3),c=Object(r.b)("auth/registerRequest"),a=Object(r.b)("auth/registerSuccess"),o=Object(r.b)("auth/registerError"),i=Object(r.b)("auth/loginRequest"),s=Object(r.b)("auth/loginSuccess"),u=Object(r.b)("auth/loginError"),b=Object(r.b)("auth/logoutRequest"),l=Object(r.b)("auth/logoutSuccess"),j=Object(r.b)("auth/logoutError"),d=Object(r.b)("auth/getCurrentUserRequest"),O=Object(r.b)("auth/getCurrentUserSuccess"),h=Object(r.b)("auth/getCurrentUserError");e.a={registerRequest:c,registerSuccess:a,registerError:o,logoutRequest:b,logoutSuccess:l,logoutError:j,loginRequest:i,loginSuccess:s,loginError:u,getCurrentUserRequest:d,getCurrentUserSuccess:O,getCurrentUserError:h}},66:function(t,e,n){t.exports={box:"App_box__8BLZI",appear:"App_appear__fiUnV",appearActive:"App_appearActive__2mifQ","filter-enter":"App_filter-enter__9BkIO","filter-enterActive":"App_filter-enterActive__2Mc5W","filter-exit":"App_filter-exit__uRrVg","filter-exitActive":"App_filter-exitActive__1dXLK"}}},[[117,6,7]]]);
//# sourceMappingURL=main.77025b07.chunk.js.map